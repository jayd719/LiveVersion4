{% extends 'hp/base.html' %} {% load static %} {% block content %}
 {% if workOrder %}
<!-- <h2 class="display-5">{{workOrder.jobNumber}}</h2> -->

<table
  class="table"
  style="text-align: center; margin-top: 0px; position: fixed"
>
  <thead class="table-dark">
    <th>Job Number</th>
    <th>Customer</th>
    <th>QTY</th>
    <th>Due Date</th>
    <th>Due In</th>
    <th>TA</th>
    <th>Status</th>
    <th>Unit</th>
  </thead>

  <tbody>
    <tr>
      <td id="jobNumber">
        {{workOrder.jobNumber}}
        <div id="Details">
          <pre>{{workOrder.des}}</pre>
        </div>
      </td>
      <td>{{workOrder.customer}}</td>
      <td>{{workOrder.qty}}</td>
      <td>{{workOrder.dueDate}}</td>
      <td class="{{workOrder.daysStat}}">{{workOrder.dueIn}}</td>
      <td>{{workOrder.TA}}</td>
      <td>{{workOrder.status}}</td>
      <td>{{workOrder.unit}}</td>
    </tr>
  </tbody>
</table>

<section class="container" style="height: 350px; text-align: center;">
  <canvas id="myChart" height="80%"></canvas>
</section>

<div class="container" style="margin-top: 30px; font-size: 14px;">
  <table class="table table-hover" style=" box-shadow: 20px 20px 60px #bebebe, -20px -20px 60px #ffffff;">
    <thead class="table-dark">
      <tr>
        <th width="55">OP</th>
        <th width="150">Work Center</th>
        <th width="40"></th>
        <th width="175">Quoted Hours</th>
        <th width="30"></th>
        <th width="150">Actual</th>
        <th width="75">Hours</th>
        <th width="100"></th>
        <th width="175">Actual</th>
      </tr>
    </thead>

    <tbody>
      {% for operation in workOrder.router%}
      <tr class="{{operation.status}}">
        <td>{{operation.stepNumber}}</td>

        <td id="jobNumber" title="{{operation.des}}">
          {{operation.workCenter}}
        </td>
        <td></td>
        <td>{{operation.estimatedHours}}</td>
        <td><pre>{{operation.displayTicket1}}</pre></td>
        <td><pre>{{operation.displayTicket2}}</pre></td>
        <td><pre>{{operation.displayTicket3}}</pre></td>
        <td><pre>{{operation.displayTicket4}}</pre></td>
        <td>{{operation.actualHours}}</td>
      </tr>

      {% endfor%}
    </tbody>
  </table>
</div>

<h2 class="display-1" style="height: 50vh">{{workOrder.jobNumber}}</h2>

<script>
  let details = document.getElementById("Details");
  let jobNumber = document.getElementById("jobNumber");

  details.style.visibility = "hidden";
  details.style.display = "none";

  jobNumber.addEventListener("mouseenter", () => {
    details.style.visibility = "visible";
    details.style.display = "block";
  });

  jobNumber.addEventListener("mouseleave", () => {
    details.style.visibility = "hidden";
    details.style.display = "none";
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<script>
  var ctx = document.getElementById("myChart").getContext("2d");
  var myChart = new Chart(ctx, {
    type: "bar",
    data: {
      labels: {{workOrder.operationList}},
      datasets: [
        {
          label: "Quoted",
          data: {{workOrder.qoutedList}},
          backgroundColor: "rgba(255,0,0,0.4)",
        },
        {
          label: "Actual",
          data: {{workOrder.actualList}},
          backgroundColor: "rgba(151,158,205,.5)",
        },
      ],
    },
  });
</script>

{% endif %} {% endblock%}
